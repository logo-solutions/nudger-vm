---
# ===========================
#  KUBERNETES / CLUSTER BASE
# ===========================
# Version K8s cible (utile pour d’autres rôles). Le "v" est souvent superflu.
# CIDR du réseau pods (Flannel par défaut)
pod_network_cidr: "10.244.0.0/16"
# Sous-réseau des Services (kubeadm ClusterConfiguration.networking.serviceSubnet)
service_subnet: "10.96.0.0/12"
# SANs supplémentaires pour le certificat de l'apiserver
# (127.0.0.1 indispensable, + IP du nœud et noms d'hôte)
apiserver_cert_sans:
  - "127.0.0.1"
  - "{{ ansible_default_ipv4.address | default('') }}"
  - "{{ inventory_hostname }}"
  - "{{ ansible_fqdn | default(inventory_hostname) }}"
# Kubeconfig côté nœud (admin) + kubeconfig utilisé par les modules Ansible
kubeconfig_admin_path: "/etc/kubernetes/admin.conf"
kubeconfig: "/root/.kube/config" # la plupart des tasks utilisent celui-ci
# CNI Flannel (si tu l’installes via Ansible ailleurs)
flannel_manifest_url: "https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml"
flannel_wait_timeout: "5m"
# Autoriser le scheduling sur control-plane si cluster mono-nœud
allow_scheduling_on_control_plane: true
# ===========================
#  UX / OUTILS (optionnel)
# ===========================
install_kubectx: true
install_kubens: true
kubectx_checkout_dir: "/opt/kubectx"
# Helpers shell (qualité de vie)
bash_aliases_enable: true
kubectl_completion_enable: true
# Ne clone pas des repos utilisateurs tant que l’SSH n’est pas prêt
users_clone_repos: false
# ===========================
#  BINAIRES / DIVERS
# ===========================
bin_dir: "/usr/local/bin"
# Compat (si certains anciens tasks utilisent ce nom)
kubeconfig_path: "{{ kubeconfig_admin_path }}"
kubeconfig_user_path: "/home/{{ ansible_user }}/.kube/config"
# Pour compat ascendante si certains rôles lisent directement cette var
github_pat: "{{ vault_github_pat | default('') }}"
k8s_version: "1.31.13-1.1"
k8s_minor_local: "1.31"
egress_nat_pod_cidr: "10.244.0.0/24"
egress_nat_svc_cidr: "10.96.0.0/12"

